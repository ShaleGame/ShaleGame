[gd_scene load_steps=7 format=3 uid="uid://dsne2t3mqf0wn"]

[ext_resource type="Script" uid="uid://blkda5ryvhlcq" path="res://Items/Weapon.cs" id="1_rbay3"]
[ext_resource type="Script" uid="uid://cnt6dnn0xqp5j" path="res://States/StateMachine.cs" id="2_se1wy"]
[ext_resource type="Script" uid="uid://xm87sk5svqjt" path="res://States/Weapons/WeaponIdleState.cs" id="3_35u3e"]
[ext_resource type="Script" uid="uid://baa585voxubpq" path="res://States/Weapons/WeaponWaitState.cs" id="4_4glh3"]
[ext_resource type="Script" uid="uid://dkk4qs0sk7jnp" path="res://States/Weapons/Behaviors/FireProjectileBehavior.cs" id="5_3smoy"]
[ext_resource type="PackedScene" uid="uid://br0ejsnvwtlsn" path="res://Entities/IceCrystal.tscn" id="6_rbay3"]

[node name="HeartOfSiracus" type="Node2D" node_paths=PackedStringArray("StateMachine")]
script = ExtResource("1_rbay3")
StateMachine = NodePath("StateMachine")

[node name="StateMachine" type="Node" parent="." node_paths=PackedStringArray("InitialState")]
script = ExtResource("2_se1wy")
InitialState = NodePath("Idle")
metadata/_custom_type_script = "uid://cnt6dnn0xqp5j"

[node name="Idle" type="Node" parent="StateMachine" node_paths=PackedStringArray("PrimaryUseState")]
script = ExtResource("3_35u3e")
PrimaryUseState = NodePath("../Use")

[node name="Use" type="Node" parent="StateMachine" node_paths=PackedStringArray("NextState", "Timer")]
script = ExtResource("4_4glh3")
NextState = NodePath("../Reload")
Timer = NodePath("UseTimer")

[node name="Fire projectile" type="Node" parent="StateMachine/Use"]
script = ExtResource("5_3smoy")
ProjectileScene = ExtResource("6_rbay3")

[node name="UseTimer" type="Timer" parent="StateMachine/Use"]
one_shot = true

[node name="Reload" type="Node" parent="StateMachine" node_paths=PackedStringArray("NextState", "Timer")]
script = ExtResource("4_4glh3")
NextState = NodePath("../Idle")
Timer = NodePath("ReloadTimer")

[node name="ReloadTimer" type="Timer" parent="StateMachine/Reload"]
one_shot = true
